<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="height=device-height,width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>Whoop Txt | Share New Whoop</title>
<link rel="stylesheet" href="http://m.ucla.edu/assets/css.php" type="text/css">
<script type="text/javascript" src="http://m.ucla.edu/assets/js.php"></script>
<script type="text/javascript" src="http://m.ucla.edu/assets/js.php?standard_libs=geolocation"></script>
<script type="text/javascript" src="javascript/CommunicationUtility.js"></script>
<script type="text/javascript" src="javascript/common.js"></script>
<script type="text/javascript" src="javascript/actb.js"></script>
</head>

<body>

<h1 id="header">
    <span>Whoop Txt</span> 
</h1>

<a id="button-top" class="button-full button-padded" href="menu.html">
	Menu
</a>

<form class="form-full form-padded">
    <h1 class="light form-first">Share New Whoop</h1>
    <label for="audience">Tags</label>
    <input type="textbox" name="audience" id="audience" />
    <label for="subject">Subject</label>
    <input type="text" name="subject" id="subject" />
    <label for="body">Message</label>
    <textarea id="body"></textarea>
    <input type="submit" name="submit" value="Whoop It" onclick="submitWhoop()">
</form>

<div id="footer"> 
    <p><a href="help.html">Help</a> | <a href="../desktop/menu.html">View Full Site</a></p> 
</div>

<script type="text/javascript">

autoCompleteArray = new Array();
autoCompleteIds = new Array();

AJAXRequest("https://rocking-apps.com/whooptxt/api/api.php?action=get_tokens", function (response) {
	
	if(response.status != "success")
	{
		alert("Connection to server failed!");
		return;
	}
	
	var tokens = response.data.tokens;
	for (index in tokens)
	{
		if(tokens[index].pending === false && tokens[index].active === true)
		{
			autoCompleteArray.push(tokens[index].name);
			autoCompleteIds.push(tokens[index].id);
		}
	}
	
	actb(document.getElementById('audience'), autoCompleteArray);
	
});

function submitWhoop () {
	mwf.touch.geolocation.getPosition(
		function(pos){ alert("Latitude:"+pos['latitude']+", Longitude:"+pos['longitude']+", Accuracy:"+pos['accuracy']); }, 
		function(err){ alert("Err:"+err); }
	);
}

</script>

</body>
</html>
